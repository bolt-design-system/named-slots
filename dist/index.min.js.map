{"version":3,"sources":["index.min.js"],"names":["global","factory","exports","module","define","amd","skatejs","named","slots","this","polyfilled","elem","mapPatch","get","getSlotName","node","getAttribute","mapSlotsDefault","nodeToArray","DocumentFragment","slice","call","childNodes","polyfill","name","props","prop","funcs","set","render","fn","ch","forEach","appendChild","slot","opts","default","coerce","val","Array","isArray","created","data","mapSlots","push","initial","filter","WeakMap","Object","defineProperty","bind","childElementCount","children","length","_this","reduce","prev","curr","concat","nodeType","firstChild","firstElementChild","innerHTML","map","outerHTML","textContent","join","div","document","createElement","hasChildNodes","lastChild","lastElementChild","tagName","toLowerCase","attributes","attr","value","createTextNode","newNode","insertBefore","refNode","index","indexOf","removeChild","replaceChild","main","previousGlobal","window","skatejsNamedSlots","noConflict"],"mappings":"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","file":"index.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.skatejs-named-slots = factory());\n}(this, function () {\n\n  var mapPatch = new WeakMap();\n\n  var mapSlots = new WeakMap();\n\n  var mapSlotsDefault = new WeakMap();\n\n  // Returns whether or not the specified element has been polyfilled.\n  function polyfilled (elem) {\n    return mapPatch.get(elem);\n  }\n\n  var prop = Object.defineProperty.bind(Object);\n\n  // Helpers.\n\n  function getSlotName(elem, node) {\n    return node.getAttribute && node.getAttribute('slot') || mapSlotsDefault.get(elem);\n  }\n\n  function nodeToArray(node) {\n    return node instanceof DocumentFragment ? [].slice.call(node.childNodes) : [node];\n  }\n\n  // Prop overrides.\n\n  var props = {\n    childElementCount: {\n      get: function get() {\n        return this.children.length;\n      }\n    },\n    childNodes: {\n      get: function get() {\n        var _this = this;\n\n        return (mapSlots.get(this) || []).reduce(function (prev, curr) {\n          return prev.concat(_this[curr]);\n        }, []);\n      }\n    },\n    children: {\n      get: function get() {\n        return this.childNodes.filter(function (node) {\n          return node.nodeType === 1;\n        });\n      }\n    },\n    firstChild: {\n      get: function get() {\n        return this.childNodes[0];\n      }\n    },\n    firstElementChild: {\n      get: function get() {\n        return this.children[0];\n      }\n    },\n    innerHTML: {\n      get: function get() {\n        return this.childNodes.map(function (node) {\n          return node.outerHTML || node.textContent;\n        }).join('');\n      },\n      set: function set(val) {\n        var div = document.createElement('div');\n        div.innerHTML = val;\n        while (div.hasChildNodes()) {\n          this.appendChild(div.childNodes[0]);\n        }\n      }\n    },\n    lastChild: {\n      get: function get() {\n        var ch = this.childNodes;\n        return ch[ch.length - 1];\n      }\n    },\n    lastElementChild: {\n      get: function get() {\n        var ch = this.children;\n        return ch[ch.length - 1];\n      }\n    },\n    outerHTML: {\n      get: function get() {\n        var name = this.tagName.toLowerCase();\n        var attributes = [].slice.call(this.attributes).map(function (attr) {\n          return ' ' + attr.name + (attr.value ? '=' + attr.value : '');\n        });\n        return '<' + name + attributes + '>' + this.innerHTML + '</' + name + '>';\n      }\n    },\n    textContent: {\n      get: function get() {\n        return this.childNodes.map(function (node) {\n          return node.textContent;\n        }).join('');\n      },\n      set: function set(val) {\n        var slot = mapSlotsDefault.get(this);\n        if (slot) {\n          this[slot] = document.createTextNode(val);\n        }\n      }\n    }\n  };\n\n  // Method overrides.\n\n  var funcs = {\n    appendChild: function appendChild(newNode) {\n      var name = getSlotName(this, newNode);\n      if (!name && !this[name]) return;\n      this[name] = this[name].concat(nodeToArray(newNode));\n      return newNode;\n    },\n    hasChildNodes: function hasChildNodes() {\n      return this.childNodes.length > 0;\n    },\n    insertBefore: function insertBefore(newNode, refNode) {\n      var name = getSlotName(this, newNode);\n      if (!name || !this[name]) return;\n      var index = this[name].indexOf(refNode);\n      this[name] = this[name].slice(0, index).concat(nodeToArray(newNode)).concat(this[name].slice(index));\n      return newNode;\n    },\n    removeChild: function removeChild(refNode) {\n      var name = getSlotName(this, refNode);\n      if (!name && !this[name]) return;\n      var index = this[name].indexOf(refNode);\n      this[name] = this[name].slice(0, index).concat(this[name].slice(index + 1));\n      return refNode;\n    },\n    replaceChild: function replaceChild(newNode, refNode) {\n      var name = getSlotName(this, newNode);\n      if (!name || !this[name]) return;\n      var index = this[name].indexOf(refNode);\n      this[name] = this[name].slice(0, index).concat(nodeToArray(newNode)).concat(this[name].slice(index + 1));\n      return refNode;\n    }\n  };\n\n  // Polyfills an element.\n  function polyfill (elem) {\n    if (polyfilled(elem)) {\n      return;\n    }\n\n    for (var name in props) {\n      prop(elem, name, props[name]);\n    }\n\n    for (var name in funcs) {\n      elem[name] = funcs[name];\n    }\n\n    mapPatch.set(elem, true);\n  }\n\n  // Simple renderer that proxies another renderer. It will polyfill if not yet\n  // polyfilled, or simply run the renderer. Initial content is taken into\n  // consideration.\n  function render (fn) {\n    return function (elem) {\n      if (mapPatch.get(elem)) {\n        fn(elem);\n      } else {\n        var ch = [].slice.call(elem.childNodes);\n        fn(elem);\n        polyfill(elem);\n        ch.forEach(elem.appendChild(ch));\n      }\n    };\n  }\n\n  // Creates a slot property compatible with the SkateJS custom property\n  // definitions. Makes web component integration much simpler.\n  function slot (opts) {\n    if (!opts) {\n      opts = {\n        default: false,\n        set: null\n      };\n    }\n\n    return {\n      // Makes sure that whatever is passed in is an array.\n      coerce: function coerce(val) {\n        return Array.isArray(val) ? val : [val];\n      },\n\n      // Registers the slot so we can check later.\n      created: function created(elem, data) {\n        var slots = mapSlots.get(elem);\n\n        if (!slots) {\n          mapSlots.set(elem, slots = []);\n        }\n\n        slots.push(data.name);\n\n        if (opts.default) {\n          mapSlotsDefault.set(elem, data.name);\n        }\n      },\n\n      // If an empty value is passed in, ensure that it's an array.\n      'default': function _default() {\n        return [];\n      },\n\n      // Return any initial nodes that match the slot.\n      initial: function initial(elem, data) {\n        return [].slice.call(elem.childNodes).filter(function (ch) {\n          var slot = ch.getAttribute && ch.getAttribute('slot') || opts.default && data.name;\n          return slot && slot === data.name;\n        });\n      },\n\n      // User-defined setter.\n      set: opts.set\n    };\n  }\n\n  var main = {\n    polyfill: polyfill,\n    polyfilled: polyfilled,\n    render: render,\n    slot: slot\n  };\n\n  var previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict() {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n\n  return main;\n\n}));\n//# sourceMappingURL=index.js.map"],"sourceRoot":"/source/"}