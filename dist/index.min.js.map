{"version":3,"sources":["index.min.js"],"names":["global","factory","exports","module","define","amd","skatejs","named","slots","this","polyfilled","elem","mapPatch","get","getSlot","node","key","getSlotName","val","slice","getAttribute","mapSlotsDefault","nodeToArray","DocumentFragment","call","childNodes","arrayItem","idx","makeLikeNodeList","arr","item","doForNodesIfSlot","func","forEach","slot","polyfill","name","props","prop","funcs","set","render","fn","opts","default","coerce","Array","isArray","created","data","mapSlots","push","initial","filter","ch","nodeType","WeakMap","Object","defineProperty","bind","childElementCount","children","length","_this","reduce","prev","curr","concat","firstChild","firstElementChild","innerHTML","map","outerHTML","textContent","join","div","document","createElement","hasChildNodes","appendChild","lastChild","lastElementChild","tagName","toLowerCase","attributes","attr","value","createTextNode","newNode","insertBefore","refNode","index","indexOf","splice","removeChild","replaceChild","version","main","previousGlobal","window","skatejsNamedSlots","noConflict"],"mappings":"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","file":"index.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.skatejs-named-slots = factory());\n}(this, function () {\n\n  var mapPatch = new WeakMap();\n\n  var mapSlots = new WeakMap();\n\n  var mapSlotsDefault = new WeakMap();\n\n  // Returns whether or not the specified element has been polyfilled.\n  function polyfilled (elem) {\n    return mapPatch.get(elem);\n  }\n\n  var prop = Object.defineProperty.bind(Object);\n\n  // Helpers.\n\n  function getSlot(elem, node) {\n    var key = getSlotName(elem, node);\n    var val = elem[key];\n    return key && val ? { key: key, val: val.slice() } : null;\n  }\n\n  function getSlotName(elem, node) {\n    return node.getAttribute && node.getAttribute('slot') || mapSlotsDefault.get(elem);\n  }\n\n  // TODO use in DOM manip methods to make them DocumentFragment compatible.\n  function nodeToArray(node) {\n    return node instanceof DocumentFragment ? [].slice.call(node.childNodes) : [node];\n  }\n\n  function arrayItem(idx) {\n    return this[idx];\n  }\n\n  function makeLikeNodeList(arr) {\n    arr.item = arrayItem;\n    return arr;\n  }\n\n  // Prop overrides.\n\n  var props = {\n    childElementCount: {\n      get: function get() {\n        return this.children.length;\n      }\n    },\n    childNodes: {\n      get: function get() {\n        var _this = this;\n\n        return makeLikeNodeList((mapSlots.get(this) || []).reduce(function (prev, curr) {\n          return prev.concat(_this[curr]);\n        }, []));\n      }\n    },\n    children: {\n      get: function get() {\n        return makeLikeNodeList(this.childNodes.filter(function (node) {\n          return node.nodeType === 1;\n        }));\n      }\n    },\n    firstChild: {\n      get: function get() {\n        return this.childNodes[0];\n      }\n    },\n    firstElementChild: {\n      get: function get() {\n        return this.children[0];\n      }\n    },\n    innerHTML: {\n      get: function get() {\n        return this.childNodes.map(function (node) {\n          return node.outerHTML || node.textContent;\n        }).join('');\n      },\n      set: function set(val) {\n        var div = document.createElement('div');\n        div.innerHTML = val;\n        while (div.hasChildNodes()) {\n          this.appendChild(div.childNodes[0]);\n        }\n      }\n    },\n    lastChild: {\n      get: function get() {\n        var ch = this.childNodes;\n        return ch[ch.length - 1];\n      }\n    },\n    lastElementChild: {\n      get: function get() {\n        var ch = this.children;\n        return ch[ch.length - 1];\n      }\n    },\n    outerHTML: {\n      get: function get() {\n        var name = this.tagName.toLowerCase();\n        var attributes = [].slice.call(this.attributes).map(function (attr) {\n          return ' ' + attr.name + (attr.value ? '=\"' + attr.value + '\"' : '');\n        }).join('');\n        return '<' + name + attributes + '>' + this.innerHTML + '</' + name + '>';\n      }\n    },\n    textContent: {\n      get: function get() {\n        return this.childNodes.map(function (node) {\n          return node.textContent;\n        }).join('');\n      },\n      set: function set(val) {\n        var slot = mapSlotsDefault.get(this);\n        if (slot) {\n          this[slot] = document.createTextNode(val);\n        }\n      }\n    }\n  };\n\n  function doForNodesIfSlot(elem, node, func) {\n    nodeToArray(node).forEach(function (node) {\n      var slot = getSlot(elem, node);\n      if (slot) {\n        func(elem, node, slot);\n      }\n    });\n  }\n\n  // Method overrides.\n\n  var funcs = {\n    appendChild: function appendChild(newNode) {\n      doForNodesIfSlot(this, newNode, function (elem, node, slot) {\n        slot.val.push(node);\n        elem[slot.key] = slot.val;\n      });\n      return newNode;\n    },\n    hasChildNodes: function hasChildNodes() {\n      return this.childNodes.length > 0;\n    },\n    insertBefore: function insertBefore(newNode, refNode) {\n      doForNodesIfSlot(this, newNode, function (elem, node, slot) {\n        var index = slot.val.indexOf(refNode);\n        if (index === -1) {\n          slot.val.push(node);\n        } else {\n          slot.val.splice(index, 0, node);\n        }\n        elem[slot.key] = slot.val;\n      });\n      return newNode;\n    },\n    removeChild: function removeChild(refNode) {\n      doForNodesIfSlot(this, refNode, function (elem, node, slot) {\n        var index = slot.val.indexOf(node);\n        if (index !== -1) {\n          slot.val.splice(index, 1);\n          elem[slot.key] = slot.val;\n        }\n      });\n      return refNode;\n    },\n    replaceChild: function replaceChild(newNode, refNode) {\n      doForNodesIfSlot(this, refNode, function (elem, node, slot) {\n        var index = slot.val.indexOf(refNode);\n        if (index !== -1) {\n          slot.val.splice(index, 1, newNode);\n          elem[slot.key] = slot.val;\n        }\n      });\n      return refNode;\n    }\n  };\n\n  // Polyfills an element.\n  function polyfill (elem) {\n    if (polyfilled(elem)) {\n      return;\n    }\n\n    for (var name in props) {\n      prop(elem, name, props[name]);\n    }\n\n    for (var name in funcs) {\n      elem[name] = funcs[name];\n    }\n\n    mapPatch.set(elem, true);\n  }\n\n  // Simple renderer that proxies another renderer. It will polyfill if not yet\n  // polyfilled, or simply run the renderer. Initial content is taken into\n  // consideration.\n  function render (fn) {\n    return function (elem) {\n      if (mapPatch.get(elem)) {\n        fn(elem);\n      } else {\n        fn(elem);\n        polyfill(elem);\n      }\n    };\n  }\n\n  // Creates a slot property compatible with the SkateJS custom property\n  // definitions. Makes web component integration much simpler.\n  function slot (opts) {\n    if (!opts) {\n      opts = {\n        default: false,\n        set: null\n      };\n    }\n\n    return {\n      // Makes sure that whatever is passed in is an array.\n      coerce: function coerce(val) {\n        return Array.isArray(val) ? val : [val];\n      },\n\n      // Registers the slot so we can check later.\n      created: function created(elem, data) {\n        var slots = mapSlots.get(elem);\n\n        if (!slots) {\n          mapSlots.set(elem, slots = []);\n        }\n\n        slots.push(data.name);\n\n        if (opts.default) {\n          mapSlotsDefault.set(elem, data.name);\n        }\n      },\n\n      // If an empty value is passed in, ensure that it's an array.\n      'default': function _default() {\n        return [];\n      },\n\n      // Return any initial nodes that match the slot.\n      initial: function initial(elem, data) {\n        return [].slice.call(elem.childNodes).filter(function (ch) {\n          if (ch.getAttribute) {\n            var slot = ch.getAttribute('slot') || opts.default && data.name;\n            return slot === data.name;\n          } else if (ch.nodeType === 3) {\n            return true;\n          }\n        });\n      },\n\n      // User-defined setter.\n      set: opts.set\n    };\n  }\n\n  var version = '0.0.1';\n\n  var main = {\n    polyfill: polyfill,\n    polyfilled: polyfilled,\n    render: render,\n    slot: slot,\n    version: version\n  };\n\n  var previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict() {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n\n  return main;\n\n}));\n//# sourceMappingURL=index.js.map"],"sourceRoot":"/source/"}