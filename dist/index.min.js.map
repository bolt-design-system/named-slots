{"version":3,"sources":["index.min.js"],"names":["global","factory","exports","module","define","amd","skatejs","named","slots","this","polyfilled","elem","mapPatch","get","getSlotName","node","getAttribute","mapSlotsDefault","nodeToArray","DocumentFragment","slice","call","childNodes","polyfill","name","props","prop","funcs","set","render","fn","chs","forEach","ch","appendChild","slot","opts","default","coerce","val","Array","isArray","created","data","mapSlots","push","initial","filter","chHasContent","nodeType","textContent","trim","WeakMap","Object","defineProperty","bind","childElementCount","children","length","_this","reduce","prev","curr","concat","firstChild","firstElementChild","innerHTML","map","outerHTML","join","div","document","createElement","hasChildNodes","lastChild","lastElementChild","tagName","toLowerCase","attributes","attr","value","createTextNode","newNode","insertBefore","refNode","index","indexOf","removeChild","replaceChild","main","previousGlobal","window","skatejsNamedSlots","noConflict"],"mappings":"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","file":"index.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.skatejs-named-slots = factory());\n}(this, function () {\n\n  var mapPatch = new WeakMap();\n\n  var mapSlots = new WeakMap();\n\n  var mapSlotsDefault = new WeakMap();\n\n  // Returns whether or not the specified element has been polyfilled.\n  function polyfilled (elem) {\n    return mapPatch.get(elem);\n  }\n\n  var prop = Object.defineProperty.bind(Object);\n\n  // Helpers.\n\n  function getSlotName(elem, node) {\n    return node.getAttribute && node.getAttribute('slot') || mapSlotsDefault.get(elem);\n  }\n\n  function nodeToArray(node) {\n    return node instanceof DocumentFragment ? [].slice.call(node.childNodes) : [node];\n  }\n\n  // Prop overrides.\n\n  var props = {\n    childElementCount: {\n      get: function get() {\n        return this.children.length;\n      }\n    },\n    childNodes: {\n      get: function get() {\n        var _this = this;\n\n        return (mapSlots.get(this) || []).reduce(function (prev, curr) {\n          return prev.concat(_this[curr]);\n        }, []);\n      }\n    },\n    children: {\n      get: function get() {\n        return this.childNodes.filter(function (node) {\n          return node.nodeType === 1;\n        });\n      }\n    },\n    firstChild: {\n      get: function get() {\n        return this.childNodes[0];\n      }\n    },\n    firstElementChild: {\n      get: function get() {\n        return this.children[0];\n      }\n    },\n    innerHTML: {\n      get: function get() {\n        return this.childNodes.map(function (node) {\n          return node.outerHTML || node.textContent;\n        }).join('');\n      },\n      set: function set(val) {\n        var div = document.createElement('div');\n        div.innerHTML = val;\n        while (div.hasChildNodes()) {\n          this.appendChild(div.childNodes[0]);\n        }\n      }\n    },\n    lastChild: {\n      get: function get() {\n        var ch = this.childNodes;\n        return ch[ch.length - 1];\n      }\n    },\n    lastElementChild: {\n      get: function get() {\n        var ch = this.children;\n        return ch[ch.length - 1];\n      }\n    },\n    outerHTML: {\n      get: function get() {\n        var name = this.tagName.toLowerCase();\n        var attributes = [].slice.call(this.attributes).map(function (attr) {\n          return ' ' + attr.name + (attr.value ? '=' + attr.value : '');\n        });\n        return '<' + name + attributes + '>' + this.innerHTML + '</' + name + '>';\n      }\n    },\n    textContent: {\n      get: function get() {\n        return this.childNodes.map(function (node) {\n          return node.textContent;\n        }).join('');\n      },\n      set: function set(val) {\n        var slot = mapSlotsDefault.get(this);\n        if (slot) {\n          this[slot] = document.createTextNode(val);\n        }\n      }\n    }\n  };\n\n  // Method overrides.\n\n  var funcs = {\n    appendChild: function appendChild(newNode) {\n      var name = getSlotName(this, newNode);\n      if (!name && !this[name]) return;\n      this[name] = this[name].concat(nodeToArray(newNode));\n      return newNode;\n    },\n    hasChildNodes: function hasChildNodes() {\n      return this.childNodes.length > 0;\n    },\n    insertBefore: function insertBefore(newNode, refNode) {\n      var name = getSlotName(this, newNode);\n      if (!name || !this[name]) return;\n      var index = this[name].indexOf(refNode);\n      this[name] = this[name].slice(0, index).concat(nodeToArray(newNode)).concat(this[name].slice(index));\n      return newNode;\n    },\n    removeChild: function removeChild(refNode) {\n      var name = getSlotName(this, refNode);\n      if (!name && !this[name]) return;\n      var index = this[name].indexOf(refNode);\n      this[name] = this[name].slice(0, index).concat(this[name].slice(index + 1));\n      return refNode;\n    },\n    replaceChild: function replaceChild(newNode, refNode) {\n      var name = getSlotName(this, newNode);\n      if (!name || !this[name]) return;\n      var index = this[name].indexOf(refNode);\n      this[name] = this[name].slice(0, index).concat(nodeToArray(newNode)).concat(this[name].slice(index + 1));\n      return refNode;\n    }\n  };\n\n  // Polyfills an element.\n  function polyfill (elem) {\n    if (polyfilled(elem)) {\n      return;\n    }\n\n    for (var name in props) {\n      prop(elem, name, props[name]);\n    }\n\n    for (var name in funcs) {\n      elem[name] = funcs[name];\n    }\n\n    mapPatch.set(elem, true);\n  }\n\n  // Simple renderer that proxies another renderer. It will polyfill if not yet\n  // polyfilled, or simply run the renderer. Initial content is taken into\n  // consideration.\n  function render (fn) {\n    return function (elem) {\n      if (mapPatch.get(elem)) {\n        fn(elem);\n      } else {\n        var chs = [].slice.call(elem.childNodes);\n        fn(elem);\n        polyfill(elem);\n        chs.forEach(function (ch) {\n          return elem.appendChild(ch);\n        });\n      }\n    };\n  }\n\n  // Creates a slot property compatible with the SkateJS custom property\n  // definitions. Makes web component integration much simpler.\n  function slot (opts) {\n    if (!opts) {\n      opts = {\n        default: false,\n        set: null\n      };\n    }\n\n    return {\n      // Makes sure that whatever is passed in is an array.\n      coerce: function coerce(val) {\n        return Array.isArray(val) ? val : [val];\n      },\n\n      // Registers the slot so we can check later.\n      created: function created(elem, data) {\n        var slots = mapSlots.get(elem);\n\n        if (!slots) {\n          mapSlots.set(elem, slots = []);\n        }\n\n        slots.push(data.name);\n\n        if (opts.default) {\n          mapSlotsDefault.set(elem, data.name);\n        }\n      },\n\n      // If an empty value is passed in, ensure that it's an array.\n      'default': function _default() {\n        return [];\n      },\n\n      // Return any initial nodes that match the slot.\n      initial: function initial(elem, data) {\n        return [].slice.call(elem.childNodes).filter(function (ch) {\n          var slot = ch.getAttribute && ch.getAttribute('slot') || opts.default && data.name;\n          var chHasContent = ch.nodeType === 1 || ch.textContent.trim();\n          return slot && slot === data.name && chHasContent;\n        });\n      },\n\n      // User-defined setter.\n      set: opts.set\n    };\n  }\n\n  var main = {\n    polyfill: polyfill,\n    polyfilled: polyfilled,\n    render: render,\n    slot: slot\n  };\n\n  var previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict() {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n\n  return main;\n\n}));\n//# sourceMappingURL=index.js.map"],"sourceRoot":"/source/"}