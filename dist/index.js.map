{"version":3,"file":"index.js","sources":["../src/util/weak-map.js","../src/shadow/data.js","../src/util/node.js","../src/light/data.js","../src/slot/data.js","../src/shadow/distribute.js","../src/util/frag-from-html.js","../src/util/html-from-frag.js","../src/host/data.js","../src/util/each.js","../src/util/can-patch-native-accessors.js","../src/light/polyfill.js","../src/host/polyfill.js","../node_modules/debounce/node_modules/date-now/index.js","../node_modules/debounce/index.js","../src/slot/polyfill.js","../src/shadow/polyfill.js","../src/version.js","../src/index.js","../src/global.js"],"sourcesContent":["export default window.WeakMap || (function () {\n  let index = 0;\n  function Wm () {\n    this.key = `____weak_map_${index++}`;\n  }\n  Wm.prototype = {\n    delete (obj) {\n      delete obj[this.key];\n    },\n    get (obj) {\n      return obj[this.key];\n    },\n    has (obj) {\n      return typeof obj[this.key] !== 'undefined';\n    },\n    set (obj, val) {\n      return obj[this.key] = val;\n    }\n  };\n  return Wm;\n}());\n","import WeakMap from '../util/weak-map';\n\nexport const hosts = new WeakMap();\nexport const roots = new WeakMap();\nexport const slots = new WeakMap();\n","const proto = Node.prototype;\nexport default proto;\nexport const {\n  appendChild,\n  insertBefore,\n  removeChild,\n  replaceChild\n} = proto;\n","import WeakMap from '../util/weak-map';\n\nexport const assignedSlot = new WeakMap();\nexport const light = new WeakMap();\nexport const parentNode = new WeakMap();\nexport const polyfilled = new WeakMap();\n","import WeakMap from '../util/weak-map';\n\nexport const assignedNodes = new WeakMap();\nexport const changeListeners = new WeakMap();\nexport const debouncedTriggerSlotChangeEvent = new WeakMap();\nexport const fallbackNodes = new WeakMap();\nexport const fallbackState = new WeakMap();\nexport const polyfilled = new WeakMap();\n","import { assignedSlot } from '../light/data';\nimport { assignedNodes, changeListeners, debouncedTriggerSlotChangeEvent, fallbackNodes, fallbackState } from '../slot/data';\nimport { roots, slots } from './data';\nimport { appendChild, insertBefore, removeChild } from '../util/node';\n\nfunction shouldAffectSlot (slot) {\n  return !fallbackState.get(slot);\n}\n\nfunction toggle (slot) {\n  if (fallbackState.get(slot)) {\n    const aNodes = assignedNodes.get(slot);\n    if (aNodes.length) {\n      const fNodes = fallbackNodes.get(slot);\n      fNodes.forEach(node => removeChild.call(slot, node));\n      aNodes.forEach(node => appendChild.call(slot, node));\n      fallbackState.set(slot, false);\n    }\n  } else {\n    const aNodes = assignedNodes.get(slot);\n    if (!aNodes.length) {\n      const fNodes = fallbackNodes.get(slot);\n      aNodes.forEach(node => removeChild.call(slot, node));\n      fNodes.forEach(node => appendChild.call(slot, node));\n      fallbackState.set(slot, true);\n    }\n  }\n}\n\nfunction triggerEvent (slot) {\n  if (changeListeners.get(slot)) {\n    debouncedTriggerSlotChangeEvent.get(slot)(slot);\n  }\n}\n\nfunction triggerSideEffects (slot) {\n  toggle(slot);\n  triggerEvent(slot);\n}\n\nfunction getSlotName (node) {\n  return (node.getAttribute ? node.getAttribute('slot') : null) || 'default';\n}\n\nfunction getSlotNode (root, node) {\n  const slot = getSlotName(node);\n  return slots.get(root)[slot];\n}\n\nexport default function (node) {\n  const host = node.parentNode;\n  const slot = getSlotNode(roots.get(host), node);\n\n  if (slot) {\n    const an = assignedNodes.get(slot);\n    const ns = node.nextSibling;\n    const shouldManip = shouldAffectSlot(slot);\n\n    assignedSlot.set(node, slot);\n\n    if (ns && ns.assignedSlot === slot) {\n      an.splice(an.indexOf(ns), 0, node);\n      shouldManip && insertBefore.call(slot, node, ns);\n    } else {\n      an.push(node);\n      shouldManip && appendChild.call(slot, node);\n    }\n\n    triggerSideEffects(slot);\n  }\n}\n\nexport function undistribute (node) {\n  const host = node.parentNode;\n  const slot = getSlotNode(roots.get(host), node);\n\n  if (slot) {\n    const an = assignedNodes.get(slot);\n    const index = an.indexOf(node);\n\n    if (index > -1) {\n      shouldAffectSlot(slot) && removeChild.call(slot, node);\n      assignedSlot.set(node, null);\n      an.splice(index, 1);\n      triggerSideEffects(slot);\n    }\n  }\n}\n","export default function (html) {\n  const frag = document.createElement('div');\n  frag.innerHTML = html;\n  return frag;\n}\n","export default function (frag) {\n  let html = '';\n  let chs = frag.childNodes;\n  let chsLen = chs.length;\n  for (let a = 0; a < chsLen; a++) {\n    html += chs[a].outerHTML;\n  }\n  return html;\n}\n","import WeakMap from '../util/weak-map';\n\nexport const lightNodes = new WeakMap();\nexport const polyfilled = new WeakMap();\n","// Does something for a single node or a DocumentFragment. This is useful when\n// working with arguments that are passed to DOM methods that work with either.\nexport default function (node, func) {\n  if (node instanceof DocumentFragment) {\n    const chs = node.childNodes;\n    const chsLen = chs.length;\n    for (let a = 0; a < chsLen; a++) {\n      func(chs[a]);\n    }\n  } else {\n    func(node);\n  }\n}\n","// Any code referring to this is because it has to work around this bug in\n// WebKit: https://bugs.webkit.org/show_bug.cgi?id=49739\nexport default !!Object.getOwnPropertyDescriptor(Node.prototype, 'parentNode').get;\n","import { assignedSlot, light, parentNode, polyfilled } from './data';\nimport { appendChild, insertBefore, removeChild, replaceChild } from '../util/node';\nimport canPatchNativeAccessors from '../util/can-patch-native-accessors';\n\nconst configurable = true;\nconst members = {\n  assignedSlot: {\n    configurable,\n    get () {\n      return assignedSlot.get(this) || null;\n    }\n  },\n  parentElement: {\n    configurable,\n    get () {\n      if (light.get(this)) {\n        const parent = this.parentNode;\n        return parent.nodeType === 1 ? parent : null;\n      }\n      return this.__parentElement;\n    }\n  },\n  parentNode: {\n    configurable,\n    get () {\n      return parentNode.get(this) || this.__parentNode || null;\n    }\n  },\n  nextSibling: {\n    configurable,\n    get () {\n      if (light.get(this)) {\n        const parChs = this.parentNode.childNodes;\n        const parChsLen = parChs.length;\n        for (let a = 0; a < parChsLen; a++) {\n          if (parChs[a] === this) {\n            return parChs[a + 1] || null;\n          }\n        }\n      }\n      return this.__nextSibling;\n    }\n  },\n  nextElementSibling: {\n    configurable,\n    get () {\n      if (light.get(this)) {\n        const parChs = this.parentNode.childNodes;\n        const parChsLen = parChs.length;\n\n        let found = false;\n        for (let a = 0; a < parChsLen; a++) {\n          if (!found && parChs[a] === this) {\n            found = true;\n          }\n\n          if (!found) {\n            continue;\n          }\n\n          const next = parChs[a + 1];\n          if (next && next.nodeType === 1) {\n            return next;\n          } else {\n            continue;\n          }\n        }\n      }\n      return this.__nextElementSibling;\n    }\n  },\n  previousSibling: {\n    configurable,\n    get () {\n      if (light.get(this)) {\n        const parChs = this.parentNode.childNodes;\n        const parChsLen = parChs.length;\n        for (let a = parChsLen - 1; a >= 0; a--) {\n          if (parChs[a] === this) {\n            return parChs[a - 1] || null;\n          }\n        }\n      }\n      return this.__previousSibling;\n    }\n  },\n  previousElementSibling: {\n    configurable,\n    get () {\n      if (light.get(this)) {\n        const parChs = this.parentNode.childNodes;\n        const parChsLen = parChs.length;\n\n        let found = false;\n        for (let a = parChsLen - 1; a >= 0; a--) {\n          if (!found && parChs[a] === this) {\n            found = true;\n          }\n\n          if (!found) {\n            continue;\n          }\n\n          const next = parChs[a - 1];\n          if (next && next.nodeType === 1) {\n            return next;\n          } else {\n            continue;\n          }\n        }\n      }\n      return this.__previousElementSibling;\n    }\n  }\n};\n\n\n// If we can patch native accessors, we can safely apply light DOM accessors to\n// all HTML elements. This is faster than polyfilling them individually as they\n// are added, if possible, and doesn't have a measurable impact on performance\n// when they're not marked as light DOM.\nconst nodeProto = Node.prototype;\nconst elProto = Element.prototype;\nif (canPatchNativeAccessors) {\n  for (let name in members) {\n    const proto = nodeProto.hasOwnProperty(name) ? nodeProto : elProto;\n    const nativeDescriptor = Object.getOwnPropertyDescriptor(proto, name);\n    if (nativeDescriptor) {\n      Object.defineProperty(proto, '__' + name, nativeDescriptor);\n    }\n    Object.defineProperty(proto, name, members[name]);\n  }\n}\n\n\n// We patch the node prototype to ensure any method that reparents a node\n// cleans up after the polyfills.\nnodeProto.appendChild = function (newNode) {\n  if (polyfilled.get(newNode)) {\n    assignedSlot.set(newNode, null);\n    light.set(newNode, false);\n    parentNode.set(newNode, this);\n  }\n  return appendChild.call(this, newNode);\n};\nnodeProto.insertBefore = function (newNode, refNode) {\n  if (polyfilled.get(newNode)) {\n    assignedSlot.set(newNode, null);\n    light.set(newNode, false);\n    parentNode.set(newNode, this);\n  }\n  return insertBefore.call(this, newNode, refNode);\n};\nnodeProto.removeChild = function (refNode) {\n  if (polyfilled.get(refNode)) {\n    assignedSlot.set(refNode, null);\n    light.set(refNode, false);\n    parentNode.set(refNode, null);\n  }\n  return removeChild.call(this, refNode);\n};\nnodeProto.replaceChild = function (newNode, refNode) {\n  if (polyfilled.get(newNode)) {\n    assignedSlot.set(newNode, null);\n    light.set(newNode, false);\n    parentNode.set(newNode, this);\n  }\n  if (polyfilled.get(refNode)) {\n    assignedSlot.set(refNode, null);\n    light.set(refNode, false);\n    parentNode.set(refNode, null);\n  }\n  return replaceChild.call(this, newNode, refNode);\n};\n\n\n// By default we should always return null from the Element for `assignedSlot`.\nObject.defineProperty(nodeProto, 'assignedSlot', {\n  configurable,\n  get () { return null; }\n});\n\n\nexport default function polyfill (light) {\n  if (polyfilled.get(light)) {\n    return;\n  }\n  polyfilled.set(light, true);\n  if (!canPatchNativeAccessors) {\n    Object.defineProperties(light, members);\n  }\n}\n","import { lightNodes, polyfilled } from './data';\nimport { light, parentNode } from '../light/data';\nimport distribute, { undistribute } from '../shadow/distribute';\nimport each from '../util/each';\nimport fragFromHtml from '../util/frag-from-html';\nimport htmlFromFrag from '../util/html-from-frag';\nimport lightPolyfill from '../light/polyfill';\n\nconst configurable = true;\n\n\n// Slotting helpers.\n\nfunction arrayItem (idx) {\n  return this[idx];\n}\n\nfunction makeLikeNodeList (arr) {\n  arr.item = arrayItem;\n  return arr;\n}\n\n// If we append a child to a host, the host tells the shadow root to distribute\n// it. If the root decides it doesn't need to be distributed, it is never\n// removed from the old parent because in polyfill land we store a reference\n// to the node but we don't move it. Due to that, we must explicitly remove the\n// node from its old parent.\nfunction cleanNode (node) {\n  const parent = node.parentNode;\n  if (parent) {\n    parent.removeChild(node);\n  }\n}\n\nconst members = {\n  appendChild: {\n    value (newNode) {\n      const ln = lightNodes.get(this);\n      const host = this;\n      cleanNode(newNode);\n      each(newNode, function (node) {\n        ln.push(node);\n        light.set(node, true);\n        parentNode.set(node, host);\n        lightPolyfill(node);\n        distribute(node);\n      });\n      return newNode;\n    }\n  },\n  childElementCount: {\n    configurable,\n    get () {\n      return this.children.length;\n    }\n  },\n  childNodes: {\n    get () {\n      return lightNodes.get(this);\n    }\n  },\n  children: {\n    get () {\n      return makeLikeNodeList(this.childNodes.filter(node => node.nodeType === 1));\n    }\n  },\n  firstChild: {\n    get () {\n      return this.childNodes[0] || null;\n    }\n  },\n  firstElementChild: {\n    get () {\n      return this.children[0] || null;\n    }\n  },\n  hasChildNodes: {\n    value () {\n      return this.childNodes.length > 0;\n    }\n  },\n  innerHTML: {\n    get () {\n      return htmlFromFrag(this);\n    },\n    set (innerHTML) {\n      const copy = fragFromHtml(innerHTML);\n      while (this.hasChildNodes()) {\n        this.removeChild(this.firstChild);\n      }\n      while (copy.hasChildNodes()) {\n        this.appendChild(copy.firstChild);\n      }\n    }\n  },\n  insertBefore: {\n    value (newNode, refNode) {\n      const ln = lightNodes.get(this);\n      const host = this;\n      cleanNode(newNode);\n      each(newNode, function (node) {\n        const index = ln.indexOf(refNode);\n        if (index > -1) {\n          ln.splice(index, 0, node);\n        } else {\n          ln.push(node);\n        }\n        light.set(node, true);\n        parentNode.set(node, host);\n        lightPolyfill(node);\n        distribute(node);\n      });\n      return newNode;\n    }\n  },\n  lastChild: {\n    get () {\n      const ch = this.childNodes;\n      return ch[ch.length - 1] || null;\n    }\n  },\n  lastElementChild: {\n    get () {\n      const ch = this.children;\n      return ch[ch.length - 1] || null;\n    }\n  },\n  outerHTML: {\n    get () {\n      const name = this.tagName.toLowerCase();\n      const attributes = Array.prototype.slice.call(this.attributes).map(function (attr) {\n        return ` ${attr.name}${attr.value ? `=\"${attr.value}\"` : ''}`;\n      }).join('');\n      return `<${name}${attributes}>${this.innerHTML}</${name}>`;\n    }\n  },\n  removeChild: {\n    value (refNode) {\n      const ln = lightNodes.get(this);\n      const index = ln.indexOf(refNode);\n\n      if (index > -1) {\n        undistribute(refNode);\n        light.set(refNode, false);\n        parentNode.set(refNode, null);\n        ln.splice(index, 1);\n      }\n\n      return refNode;\n    }\n  },\n  replaceChild: {\n    value (newNode, refNode) {\n      this.insertBefore(newNode, refNode);\n      return this.removeChild(refNode);\n    }\n  },\n  textContent: {\n    get () {\n      return this.childNodes.map(node => node.textContent).join('');\n    },\n    set (textContent) {\n      while (this.hasChildNodes()) {\n        this.removeChild(this.firstChild);\n      }\n      this.appendChild(document.createTextNode(textContent));\n    }\n  }\n};\n\nexport default function (host) {\n  if (polyfilled.get(host)) {\n    return;\n  }\n  lightNodes.set(host, makeLikeNodeList([]));\n  Object.defineProperties(host, members);\n  polyfilled.set(host, true);\n  return host;\n}\n","module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n","\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n","import { assignedNodes, changeListeners, debouncedTriggerSlotChangeEvent, fallbackNodes, fallbackState, polyfilled } from './data';\nimport { appendChild, insertBefore, removeChild, replaceChild } from '../util/node';\nimport debounce from 'debounce';\nimport element, { addEventListener, removeEventListener } from '../util/element';\nimport fragFromHtml from '../util/frag-from-html';\n\nfunction getInitialFallbackContent (slot) {\n  const arr = [];\n  const chs = slot.childNodes;\n  const chsLen = chs.length;\n  for (let a = 0; a < chsLen; a++) {\n    arr.push(chs[a]);\n  }\n  return arr;\n}\n\nfunction getAssignedNodesDeep (slot) {\n  return assignedNodes.get(slot);\n}\n\nfunction shouldAffectSlot (slot) {\n  return fallbackState.get(slot);\n}\n\nfunction triggerSlotChangeEvent (slot) {\n  slot.dispatchEvent(new CustomEvent('slotchange', {\n    bubbles: false,\n    cancelable: false\n  }));\n}\n\nconst members = {\n  appendChild: {\n    value (newNode) {\n      shouldAffectSlot(this) && appendChild.call(this, newNode);\n      this.childNodes.push(newNode);\n      return newNode;\n    }\n  },\n  childElementCount: {\n    get () {\n      return this.children.length;\n    }\n  },\n  childNodes: {\n    get () {\n      return fallbackNodes.get(this);\n    }\n  },\n  children: {\n    get () {\n      return this.childNodes.filter(node => node.nodeType === 1);\n    }\n  },\n  firstChild: {\n    get () {\n      return this.childNodes[0] || null;\n    }\n  },\n  firstElementChild: {\n    get () {\n      return this.children[0] || null;\n    }\n  },\n  getAssignedNodes: {\n    value (opts = {}) {\n      return opts.deep ? getAssignedNodesDeep(this) : assignedNodes.get(this);\n    }\n  },\n  hasChildNodes: {\n    value () {\n      return !!this.childNodes.length;\n    }\n  },\n  innerHTML: {\n    get () {\n      return fallbackNodes.get(this).map(node => node.outerHTML).join('');\n    },\n    set (innerHTML) {\n      fallbackNodes.set(this, []);\n      const chs = fragFromHtml(innerHTML).childNodes;\n      const chsLen = chs.length;\n      for (let a = chsLen - 1; a >= 0; a--) {\n        this.insertBefore(chs[a], this.firstChild);\n      }\n    }\n  },\n  insertBefore: {\n    value (newNode, refNode) {\n      const fb = fallbackNodes.get(this);\n      shouldAffectSlot(this) && insertBefore.call(this, newNode, refNode);\n      fb.splice(fb.indexOf(refNode), 0, newNode);\n      return newNode;\n    }\n  },\n  lastChild: {\n    get () {\n      const chs = this.childNodes;\n      return chs[chs.length - 1] || null;\n    }\n  },\n  lastElementChild: {\n    get () {\n      const chs = this.children;\n      return chs[chs.length - 1] || null;\n    }\n  },\n  name: {\n    get () {\n      return this.getAttribute('name');\n    },\n    set (name) {\n      this.setAttribute('name', name);\n    }\n  },\n  outerHTML: {\n    get () {\n      const attrs = this.attributes;\n      const tag = this.tagName.toLowerCase();\n      let str = `<${tag}`;\n      if (attrs) {\n        const attrsLen = attrs.length;\n        for (let a = 0; a < attrsLen; a++) {\n          const attr = attrs[a];\n          str += ` ${attr.nodeName || attr.name}=\"${attr.nodeValue}\"`;\n        }\n      }\n      return str + '>' + this.innerHTML + `</${tag}>`;\n    }\n  },\n  removeChild: {\n    value (refNode) {\n      const fb = fallbackNodes.get(this);\n      shouldAffectSlot(this) && removeChild.call(this, refNode);\n      fb.splice(fb.indexOf(refNode), 1);\n      return refNode;\n    }\n  },\n  replaceChild: {\n    value (newNode, refNode) {\n      const fb = fallbackNodes.get(this);\n      shouldAffectSlot(this) && replaceChild.call(this, newNode, refNode);\n      fb.splice(fb.indexOf(refNode), 1, newNode);\n      return refNode;\n    }\n  },\n  textContent: {\n    get () {\n      return fallbackNodes.get(this).map(node => node.textContent).join('');\n    },\n    set (textContent) {\n      fallbackNodes.set(this, [document.createTextNode(textContent)]);\n    }\n  }\n};\n\n// Patch add/removeEventListener() so that we can keep track of slotchange\n// events. Since we support <slot> elements and normal elements - due to some\n// quirks that cannot be polyfilled - we polyfill this for every element.\nelement.addEventListener = function (name, func, opts) {\n  if (name === 'slotchange') {\n    let listeners = changeListeners.get(this) || 0;\n    changeListeners.set(this, ++listeners);\n  }\n  return addEventListener.call(this, name, func, opts);\n};\nelement.removeEventListener = function (name, func, opts) {\n  if (name === 'slotchange') {\n    let listeners = changeListeners.get(this) || 1;\n    changeListeners.set(this, --listeners);\n  }\n  return removeEventListener.call(this, name, func, opts);\n};\n\nfunction polyfill (slot) {\n  assignedNodes.set(slot, []);\n  fallbackNodes.set(slot, getInitialFallbackContent(slot));\n  fallbackState.set(slot, true);\n  debouncedTriggerSlotChangeEvent.set(slot, debounce(triggerSlotChangeEvent));\n  Object.defineProperties(slot, members);\n}\n\nexport default function (slot) {\n  if (polyfilled.get(slot)) {\n    return slot;\n  }\n  polyfill(slot);\n  polyfilled.set(slot, true);\n  return slot;\n}\n","import { hosts, roots, slots } from './data';\nimport { appendChild, insertBefore, removeChild, replaceChild } from '../util/node';\nimport distribute, { undistribute } from './distribute';\nimport elemProto from '../util/element';\nimport fragFromHtml from '../util/frag-from-html';\nimport htmlFromFrag from '../util/html-from-frag';\nimport hostPolyfill from '../host/polyfill';\nimport slotPolyfill from '../slot/polyfill';\n\n\nconst defaultShadowRootTagName = '_shadow_root_';\n\n\n// Returns a document fragment of the childNodes of the specified element. Due\n// to the nature of the DOM, this will remove the nodes from the element.\nfunction createFragmentFromChildNodes (elem) {\n  const frag = document.createDocumentFragment();\n  while (elem.hasChildNodes()) {\n    frag.appendChild(elem.firstChild);\n  }\n  return frag;\n}\n\n\n// Takes the shadow root and caches the slots it has.\nfunction cacheSlots (root, node) {\n  const oldSlots = slots.get(root);\n  if (node.tagName === 'SLOT') {\n    slotPolyfill(node);\n    oldSlots[node.name || 'default'] = node;\n\n    const host = hosts.get(root);\n    const hostChs = host.childNodes;\n    const hostChsLen = hostChs.length;\n    for (let a = 0; a < hostChsLen; a++) {\n      const ch = hostChs[a];\n      if (!ch.assignedSlot) {\n        distribute(ch);\n      }\n    }\n  } else {\n    const newSlots = node.querySelectorAll('slot');\n    const newSlotsLen = newSlots.length;\n    for (let a = 0; a < newSlotsLen; a++) {\n      cacheSlots(root, newSlots[a]);\n    }\n  }\n}\n\nfunction uncacheSlots (root, node) {\n  const oldSlots = slots.get(root);\n  if (node.tagName === 'SLOT') {\n    node.getAssignedNodes().forEach(aNode => undistribute(aNode));\n    delete oldSlots[node.name || 'default'];\n  } else if (node.nodeType === 1) {\n    const newSlots = node.querySelectorAll('slot');\n    const newSlotsLen = newSlots.length;\n    for (let a = 0; a < newSlotsLen; a++) {\n      uncacheSlots(root, newSlots[a]);\n    }\n  }\n}\n\n\nconst members = {\n  appendChild: {\n    configurable: true,\n    value (newNode) {\n      const ret = appendChild.call(this, newNode);\n      cacheSlots(this, newNode);\n      return ret;\n    }\n  },\n  host: {\n    configurable: true,\n    get () {\n      return hosts.get(this);\n    }\n  },\n  innerHTML: {\n    configurable: true,\n    get () {\n      return htmlFromFrag(this);\n    },\n    set (innerHTML) {\n      const frag = fragFromHtml(innerHTML);\n      while (frag.hasChildNodes()) {\n        this.appendChild(frag.firstChild);\n      }\n    }\n  },\n  insertBefore: {\n    configurable: true,\n    value (newNode, refNode) {\n      const ret = insertBefore.call(this, newNode, refNode);\n      cacheSlots(this, newNode);\n      return ret;\n    }\n  },\n  removeChild: {\n    configurable: true,\n    value (refNode) {\n      const ret = removeChild.call(this, refNode);\n      uncacheSlots(this, refNode);\n      return ret;\n    }\n  },\n  replaceChild: {\n    configurable: true,\n    value (newNode, refNode) {\n      const ret = replaceChild.call(this, newNode, refNode);\n      cacheSlots(this, newNode);\n      uncacheSlots(this, refNode);\n      return ret;\n    }\n  }\n};\n\n\n// Polyfill the native `attachShadow()` method if it doesn't exist.\nif (!elemProto.attachShadow) {\n  elemProto.attachShadow = function (opts) {\n    const mode = opts && opts.mode;\n    if (mode !== 'closed' && mode !== 'open') {\n      throw new Error('You must specify { mode } as \"open\" or \"closed\" to attachShadow().');\n    }\n    return polyfill(this, opts);\n  };\n}\n\n\nexport default function polyfill (host, { mode, polyfillShadowRootTagName } = {}) {\n  const existingShadowRoot = roots.get(host);\n\n  if (existingShadowRoot) {\n    return existingShadowRoot;\n  }\n\n  const shadowRoot = document.createElement(polyfillShadowRootTagName || defaultShadowRootTagName);\n  const initialLightDom = createFragmentFromChildNodes(host);\n\n  // Host and shadow root data.\n  hosts.set(shadowRoot, host);\n  roots.set(host, shadowRoot);\n  slots.set(shadowRoot, {});\n\n  // Emulating the spec { mode }.\n  Object.defineProperty(host, 'shadowRoot', {\n    configurable: true,\n    get () {\n      return mode === 'open' ? shadowRoot : null;\n    }\n  });\n\n  // The shadow root is actually the only child of the host.\n  host.appendChild(shadowRoot);\n\n  // Now polyfill the shadow root so that we can cache slots.\n  Object.defineProperties(shadowRoot, members);\n\n  // Polyfill the host.\n  hostPolyfill(host);\n\n  // Finally, insert the initial light DOM content so it's distributed.\n  host.appendChild(initialLightDom);\n\n  return shadowRoot;\n}\n","export default '0.0.1';\n","import polyfill from './shadow/polyfill';\nimport version from './version';\n\nexport default polyfill;\nexport { version };\n","\n  import main, * as api from '../src/index.js';\n  const previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict () {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n  for (let name in api) {\n    main[name] = api[name];\n  }\n  export default main;\n"],"names":["polyfilled","configurable","members","name","proto","polyfill","shouldAffectSlot","main"],"mappings":"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"}