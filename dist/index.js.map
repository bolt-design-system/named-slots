{"version":3,"file":"index.js","sources":["../src/internal/map/patch.js","../src/internal/map/slots.js","../src/internal/map/slots-default.js","../src/polyfilled.js","../src/polyfill.js","../src/render.js","../src/slot.js","../src/version.js","../src/index.js","../src/global.js"],"sourcesContent":["export default new WeakMap();\n","export default new WeakMap();\n","export default new WeakMap();\n","import mapPatch from './internal/map/patch';\n\n// Returns whether or not the specified element has been polyfilled.\nexport default function (elem) {\n  return mapPatch.get(elem);\n}\n","import mapPatch from './internal/map/patch';\nimport mapSlots from './internal/map/slots';\nimport mapSlotsDefault from './internal/map/slots-default';\nimport polyfilled from './polyfilled';\n\nconst prop = Object.defineProperty.bind(Object);\n\n\n// Helpers.\n\nfunction getSlot (elem, node) {\n  const key = getSlotName(elem, node);\n  const val = elem[key];\n  return key && val ? { key, val: val.slice() } : null;\n}\n\nfunction getSlotName (elem, node) {\n  return node.getAttribute && node.getAttribute('slot') || mapSlotsDefault.get(elem);\n}\n\n// TODO use in DOM manip methods to make them DocumentFragment compatible.\nfunction nodeToArray (node) {\n  return node instanceof DocumentFragment ? [].slice.call(node.childNodes) : [node];\n}\n\nfunction arrayItem (idx) {\n  return this[idx];\n}\n\nfunction makeLikeNodeList (arr) {\n  arr.item = arrayItem;\n  return arr;\n}\n\n\n// Prop overrides.\n\nconst props = {\n  childElementCount: {\n    get () {\n      return this.children.length;\n    }\n  },\n  childNodes: {\n    get () {\n      return makeLikeNodeList((mapSlots.get(this) || []).reduce((prev, curr) => prev.concat(this[curr]), []));\n    }\n  },\n  children: {\n    get () {\n      return makeLikeNodeList(this.childNodes.filter(node => node.nodeType === 1));\n    }\n  },\n  firstChild: {\n    get () {\n      return this.childNodes[0];\n    }\n  },\n  firstElementChild: {\n    get () {\n      return this.children[0];\n    }\n  },\n  innerHTML: {\n    get () {\n      return this.childNodes.map(node => node.outerHTML || node.textContent).join('');\n    },\n    set (val) {\n      const div = document.createElement('div');\n      div.innerHTML = val;\n      while (div.hasChildNodes()) {\n        this.appendChild(div.childNodes[0]);\n      }\n    }\n  },\n  lastChild: {\n    get () {\n      const ch = this.childNodes;\n      return ch[ch.length - 1];\n    }\n  },\n  lastElementChild: {\n    get () {\n      const ch = this.children;\n      return ch[ch.length - 1];\n    }\n  },\n  outerHTML: {\n    get () {\n      var name = this.tagName.toLowerCase();\n      var attributes = [].slice.call(this.attributes).map(function (attr) {\n        return ` ${attr.name}${attr.value ? `=${attr.value}` : ''}`;\n      });\n      return `<${name}${attributes}>${this.innerHTML}</${name}>`;\n    }\n  },\n  textContent: {\n    get () {\n      return this.childNodes.map(node => node.textContent).join('');\n    },\n    set (val) {\n      const slot = mapSlotsDefault.get(this);\n      if (slot) {\n        this[slot] = document.createTextNode(val);\n      }\n    }\n  }\n};\n\n\n// Method overrides.\n\nconst funcs = {\n  appendChild (newNode) {\n    const slot = getSlot(this, newNode);\n    if (!slot) {\n      return;\n    }\n    slot.val.push(newNode);\n    this[slot.key] = slot.val;\n    return newNode;\n  },\n  hasChildNodes () {\n    return this.childNodes.length > 0;\n  },\n  insertBefore (newNode, refNode) {\n    const slot = getSlot(this, newNode);\n    if (!slot) {\n      return;\n    }\n    const index = slot.val.indexOf(refNode);\n    if (index === -1) {\n      slot.val.push(newNode);\n    } else {\n      slot.val.splice(index, 0, newNode);\n    }\n    this[slot.key] = slot.val;\n    return newNode;\n  },\n  removeChild (refNode) {\n    const slot = getSlot(this, refNode);\n    if (!slot) {\n      return;\n    }\n    const index = slot.val.indexOf(refNode);\n    if (index !== -1) {\n      slot.val.splice(index, 1);\n      this[slot.key] = slot.val;\n    }\n    return refNode;\n  },\n  replaceChild (newNode, refNode) {\n    const slot = getSlot(this, newNode);\n    if (!slot) {\n      return;\n    }\n    const index = slot.val.indexOf(refNode);\n    if (index !== -1) {\n      slot.val.splice(index, 1, newNode);\n      this[slot.key] = slot.val;\n    }\n    return refNode;\n  }\n};\n\n\n// Polyfills an element.\nexport default function (elem) {\n  if (polyfilled(elem)) {\n    return;\n  }\n\n  for (let name in props) {\n    prop(elem, name, props[name]);\n  }\n\n  for (let name in funcs) {\n    elem[name] = funcs[name];\n  }\n\n  mapPatch.set(elem, true);\n}\n","import polyfill from './polyfill';\nimport mapPatch from './internal/map/patch';\n\n// Simple renderer that proxies another renderer. It will polyfill if not yet\n// polyfilled, or simply run the renderer. Initial content is taken into\n// consideration.\nexport default function (fn) {\n  return function (elem) {\n    if (mapPatch.get(elem)) {\n      fn(elem);\n    } else {\n      fn(elem);\n      polyfill(elem);\n    }\n  };\n}\n","import mapSlots from './internal/map/slots';\nimport mapSlotsDefault from './internal/map/slots-default';\n\n// Creates a slot property compatible with the SkateJS custom property\n// definitions. Makes web component integration much simpler.\nexport default function (opts) {\n  if (!opts) {\n    opts = {\n      default: false,\n      set: null\n    };\n  }\n\n  return {\n    // Makes sure that whatever is passed in is an array.\n    coerce: function (val) {\n      return Array.isArray(val) ? val : [val];\n    },\n\n    // Registers the slot so we can check later.\n    created: function (elem, data) {\n      let slots = mapSlots.get(elem);\n\n      if (!slots) {\n        mapSlots.set(elem, slots = []);\n      }\n\n      slots.push(data.name);\n\n      if (opts.default) {\n        mapSlotsDefault.set(elem, data.name);\n      }\n    },\n\n    // If an empty value is passed in, ensure that it's an array.\n    'default': function () {\n      return [];\n    },\n\n    // Return any initial nodes that match the slot.\n    initial: function (elem, data) {\n      return [].slice.call(elem.childNodes).filter(function (ch) {\n        if (ch.getAttribute) {\n          const slot = ch.getAttribute('slot') || (opts.default && data.name);\n          return slot === data.name;\n        } else if (ch.nodeType === 3) {\n          return true;\n        }\n      });\n    },\n\n    // User-defined setter.\n    set: opts.set\n  };\n}\n","export default '0.0.1';\n","import polyfill from './polyfill';\nimport polyfilled from './polyfilled';\nimport render from './render';\nimport slot from './slot';\nimport version from './version';\n\nexport default {\n  polyfill,\n  polyfilled,\n  render,\n  slot,\n  version\n};\n","\n  import main from '../src/index.js';\n\n  const previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict () {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n\n  export default main;\n"],"names":[],"mappings":"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"}