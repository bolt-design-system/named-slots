{"version":3,"file":"index.js","sources":["../src/internal/map/patch.js","../src/internal/map/slots.js","../src/internal/map/slots-default.js","../src/polyfilled.js","../src/polyfill.js","../src/render.js","../src/slot.js","../src/index.js","../src/global.js"],"sourcesContent":["export default new WeakMap();\n","export default new WeakMap();\n","export default new WeakMap();\n","import mapPatch from './internal/map/patch';\n\n// Returns whether or not the specified element has been polyfilled.\nexport default function (elem) {\n  return mapPatch.get(elem);\n}\n","import mapPatch from './internal/map/patch';\nimport mapSlots from './internal/map/slots';\nimport mapSlotsDefault from './internal/map/slots-default';\nimport polyfilled from './polyfilled';\n\nconst prop = Object.defineProperty.bind(Object);\n\n\n// Helpers.\n\nfunction getSlotName (elem, node) {\n  return node.getAttribute && node.getAttribute('slot') || mapSlotsDefault.get(elem);\n}\n\nfunction nodeToArray (node) {\n  return node instanceof DocumentFragment ? [].slice.call(node.childNodes) : [node];\n}\n\n\n// Prop overrides.\n\nconst props = {\n  childElementCount: {\n    get () {\n      return this.children.length;\n    }\n  },\n  childNodes: {\n    get () {\n      return (mapSlots.get(this) || []).reduce((prev, curr) => prev.concat(this[curr]), []);\n    }\n  },\n  children: {\n    get () {\n      return this.childNodes.filter(node => node.nodeType === 1);\n    }\n  },\n  firstChild: {\n    get () {\n      return this.childNodes[0];\n    }\n  },\n  firstElementChild: {\n    get () {\n      return this.children[0];\n    }\n  },\n  innerHTML: {\n    get () {\n      return this.childNodes.map(node => node.outerHTML || node.textContent).join('');\n    },\n    set (val) {\n      const div = document.createElement('div');\n      div.innerHTML = val;\n      while (div.hasChildNodes()) {\n        this.appendChild(div.childNodes[0]);\n      }\n    }\n  },\n  lastChild: {\n    get () {\n      const ch = this.childNodes;\n      return ch[ch.length - 1];\n    }\n  },\n  lastElementChild: {\n    get () {\n      const ch = this.children;\n      return ch[ch.length - 1];\n    }\n  },\n  outerHTML: {\n    get () {\n      var name = this.tagName.toLowerCase();\n      var attributes = [].slice.call(this.attributes).map(function (attr) {\n        return ` ${attr.name}${attr.value ? `=${attr.value}` : ''}`;\n      });\n      return `<${name}${attributes}>${this.innerHTML}</${name}>`;\n    }\n  },\n  textContent: {\n    get () {\n      return this.childNodes.map(node => node.textContent).join('');\n    },\n    set (val) {\n      const slot = mapSlotsDefault.get(this);\n      if (slot) {\n        this[slot] = document.createTextNode(val);\n      }\n    }\n  }\n};\n\n\n// Method overrides.\n\nconst funcs = {\n  appendChild (newNode) {\n    const name = getSlotName(this, newNode);\n    if (!name && !this[name]) return;\n    this[name] = this[name].concat(nodeToArray(newNode));\n    return newNode;\n  },\n  hasChildNodes () {\n    return this.childNodes.length > 0;\n  },\n  insertBefore (newNode, refNode) {\n    const name = getSlotName(this, newNode);\n    if (!name || !this[name]) return;\n    const index = this[name].indexOf(refNode);\n    this[name] = this[name].slice(0, index).concat(nodeToArray(newNode)).concat(this[name].slice(index));\n    return newNode;\n  },\n  removeChild (refNode) {\n    const name = getSlotName(this, refNode);\n    if (!name && !this[name]) return;\n    const index = this[name].indexOf(refNode);\n    this[name] = this[name].slice(0, index).concat(this[name].slice(index + 1));\n    return refNode;\n  },\n  replaceChild (newNode, refNode) {\n    const name = getSlotName(this, newNode);\n    if (!name || !this[name]) return;\n    const index = this[name].indexOf(refNode);\n    this[name] = this[name].slice(0, index).concat(nodeToArray(newNode)).concat(this[name].slice(index + 1));\n    return refNode;\n  }\n};\n\n\n// Polyfills an element.\nexport default function (elem) {\n  if (polyfilled(elem)) {\n    return;\n  }\n\n  for (let name in props) {\n    prop(elem, name, props[name]);\n  }\n\n  for (let name in funcs) {\n    elem[name] = funcs[name];\n  }\n\n  mapPatch.set(elem, true);\n}\n","import polyfill from './polyfill';\nimport mapPatch from './internal/map/patch';\n\n// Simple renderer that proxies another renderer. It will polyfill if not yet\n// polyfilled, or simply run the renderer. Initial content is taken into\n// consideration.\nexport default function (fn) {\n  return function (elem) {\n    if (mapPatch.get(elem)) {\n      fn(elem);\n    } else {\n      const ch = [].slice.call(elem.childNodes);\n      fn(elem);\n      polyfill(elem);\n      ch.forEach(elem.appendChild(ch));\n    }\n  };\n}","import mapSlots from './internal/map/slots';\nimport mapSlotsDefault from './internal/map/slots-default';\n\n// Creates a slot property compatible with the SkateJS custom property\n// definitions. Makes web component integration much simpler.\nexport default function (opts) {\n  if (!opts) {\n    opts = {\n      default: false,\n      set: null\n    };\n  }\n\n  return {\n    // Makes sure that whatever is passed in is an array.\n    coerce: function (val) {\n      return Array.isArray(val) ? val : [val];\n    },\n\n    // Registers the slot so we can check later.\n    created: function (elem, data) {\n      let slots = mapSlots.get(elem);\n\n      if (!slots) {\n        mapSlots.set(elem, slots = []);\n      }\n\n      slots.push(data.name);\n\n      if (opts.default) {\n        mapSlotsDefault.set(elem, data.name);\n      }\n    },\n\n    // If an empty value is passed in, ensure that it's an array.\n    'default': function () {\n      return [];\n    },\n\n    // Return any initial nodes that match the slot.\n    initial: function (elem, data) {\n      return [].slice.call(elem.childNodes).filter(function (ch) {\n        const slot = (ch.getAttribute && ch.getAttribute('slot')) || (opts.default && data.name);\n        return slot && slot === data.name;\n      });\n    },\n\n    // User-defined setter.\n    set: opts.set\n  };\n}\n","\n\n\n\n\nimport polyfill from './polyfill';\nimport polyfilled from './polyfilled';\nimport render from './render';\nimport slot from './slot';\n\nexport default {\n  polyfill,\n  polyfilled,\n  render,\n  slot\n};\n","\n  import main from '../src/index.js';\n\n  const previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict () {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n\n  export default main;\n"],"names":[],"mappings":"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"}