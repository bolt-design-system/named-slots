{"version":3,"file":"index.js","sources":["../src/internal/map-polyfilled.js","../src/internal/prop.js","../src/polyfill.js","../src/global.js"],"sourcesContent":["export default new WeakMap();\n","export default Object.defineProperty.bind(Object);\n","import mapPolyfilled from './internal/map-polyfilled';\nimport prop from './internal/prop';\n\n\n// Helpers.\n\nfunction applyParentNode (node, parent) {\n  prop(node, 'parentNode', {\n    configurable: true,\n    get: function () {\n      return parent;\n    }\n  });\n}\n\nfunction removeParentNode (node) {\n  prop(node, 'parentNode', {\n    configurable: true,\n    get: function () {\n      return null;\n    }\n  });\n}\n\nfunction arrayItem (idx) {\n  return this[idx];\n}\n\nfunction doForNodesIfSlot (elem, node, func) {\n  nodeToArray(node).forEach(function (node) {\n    const slot = getSlot(elem, node);\n    if (slot) {\n      func(elem, node, slot);\n    }\n  });\n}\n\nfunction getSlot (elem, node) {\n  if (!node) {\n    return;\n  }\n\n  const name = node.getAttribute && node.getAttribute('slot') || 'content';\n\n  if (!elem.__slots) {\n    elem.__slots = {};\n  }\n\n  const slots = elem.__slots;\n\n  if (typeof slots[name] === 'undefined') {\n    const slot = elem.querySelector(`[slot-name=\"${name === 'content' ? '' : name}\"]`);\n    if (slot) {\n      slots[name] = slot;\n    }\n  }\n\n  if (slots[name]) {\n    return slots[name];\n  }\n}\n\nfunction makeLikeNodeList (arr) {\n  arr.item = arrayItem;\n  return arr;\n}\n\nfunction nodeToArray (node) {\n  return node instanceof DocumentFragment ? toArray(node.childNodes) : [node];\n}\n\nfunction toArray (obj) {\n  return Array.prototype.slice.call(obj);\n}\n\n\n// Prop overrides.\n\nconst props = {\n  childElementCount: {\n    get () {\n      return this.children.length;\n    }\n  },\n  childNodes: {\n    get () {\n      let nodes = [];\n      const slots = this.__slots;\n      if (slots) {\n        for (let name in slots) {\n          const slot = slots[name];\n          const childNodes = slot.childNodes;\n          const childNodesLen = childNodes.length;\n          for (let a = 0; a < childNodesLen; a++) {\n            nodes.push(childNodes[a]);\n          }\n        }\n      }\n      return makeLikeNodeList(nodes);\n    }\n  },\n  children: {\n    get () {\n      return makeLikeNodeList(this.childNodes.filter(node => node.nodeType === 1));\n    }\n  },\n  firstChild: {\n    get () {\n      return this.childNodes[0] || null;\n    }\n  },\n  firstElementChild: {\n    get () {\n      return this.children[0] || null;\n    }\n  },\n  innerHTML: {\n    get () {\n      return this.childNodes.map(node => node.outerHTML || node.textContent).join('');\n    },\n    set (val) {\n      const div = document.createElement('div');\n      const frag = document.createDocumentFragment();\n      div.innerHTML = val;\n      while (div.hasChildNodes()) {\n        frag.appendChild(div.firstChild);\n      }\n      this.appendChild(frag);\n    }\n  },\n  lastChild: {\n    get () {\n      const ch = this.childNodes;\n      return ch[ch.length - 1] || null;\n    }\n  },\n  lastElementChild: {\n    get () {\n      const ch = this.children;\n      return ch[ch.length - 1] || null;\n    }\n  },\n  outerHTML: {\n    get () {\n      const name = this.tagName.toLowerCase();\n      const attributes = toArray(this.attributes).map(function (attr) {\n        return ` ${attr.name}${attr.value ? `=\"${attr.value}\"` : ''}`;\n      }).join('');\n      return `<${name}${attributes}>${this.innerHTML}</${name}>`;\n    }\n  },\n  textContent: {\n    get () {\n      return this.childNodes.map(node => node.textContent).join('');\n    },\n    set (val) {\n      doForNodesIfSlot(this, val.toString(), function (elem, node, slot) {\n        slot.textContent = node;\n      });\n    }\n  }\n};\n\n\n// Method overrides.\n\nconst funcs = {\n  appendChild (newNode) {\n    doForNodesIfSlot(this, newNode, function (elem, node, slot) {\n      slot.appendChild(node);\n      applyParentNode(node, elem);\n    });\n    return newNode;\n  },\n  hasChildNodes () {\n    return this.childNodes.length > 0;\n  },\n  insertBefore (newNode, refNode) {\n    doForNodesIfSlot(this, newNode, function (elem, node, slot) {\n      slot.insertBefore(node, refNode);\n      applyParentNode(node, elem);\n    });\n    return newNode;\n  },\n  removeChild (refNode) {\n    doForNodesIfSlot(this, refNode, function (elem, node, slot) {\n      slot.removeChild(node);\n      removeParentNode(node);\n    });\n    return refNode;\n  },\n  replaceChild (newNode, refNode) {\n    doForNodesIfSlot(this, newNode, function (elem, node, slot) {\n      slot.replaceChild(node, refNode);\n      applyParentNode(node, elem);\n    });\n    removeParentNode(refNode);\n    return refNode;\n  }\n};\n\n\n// Polyfills an element.\nexport default function (elem) {\n  if (mapPolyfilled.get(elem)) {\n    return;\n  }\n\n  // Polyfill properties.\n  for (let name in props) {\n    prop(elem, name, props[name]);\n  }\n\n  // Polyfill methods.\n  for (let name in funcs) {\n    elem[name] = funcs[name];\n  }\n\n  mapPolyfilled.set(elem, true);\n  return elem;\n}\n","\n  import main from '../src/index.js';\n\n  const previousGlobal = window.skatejsNamedSlots;\n  main.noConflict = function noConflict () {\n    window.skatejsNamedSlots = previousGlobal;\n    return this;\n  };\n  window.skatejsNamedSlots = main;\n\n  export default main;\n"],"names":["main"],"mappings":"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"}